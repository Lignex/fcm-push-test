<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Récupération FCM Token</title>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-messaging-compat.js"></script>
  </head>
  <body>
    <h1>Token FCM</h1>
    <pre id="token">En attente…</pre>

    <script>
      // 1) Copiez ici la config web fournie par Firebase (Paramètres du projet > Config Web)
      const firebaseConfig = {
        apiKey: "AIzaSyDfO1WFc8BvQtNJYfxbwcZEmMVTxteJ7A8",
        authDomain: "suividossiernotif.firebaseapp.com",
        projectId: "suividossiernotif",
        messagingSenderId: "370755576649",
        appId: "1:370755576649:web:ef52994a2e12bd71c2b098"
      };
      firebase.initializeApp(firebaseConfig);

      const messaging = firebase.messaging();

      // 2) Demande de permission et récupération du token
      messaging.requestPermission()
        .then(() => messaging.getToken({
          vapidKey: "fl7KoU6emZgJ9DTGBmWq6DNZCLG9RVIyWYALehPs2Oc"  // visible dans Cloud Messaging > Config Web Push
        }))
        .then(token => {
          document.getElementById('token').textContent = token;
        })
        .catch(err => {
          document.getElementById('token').textContent = 'Erreur : ' + err;
        });
    </script>
  </body>
</html>
